{% extends 'bbs/layout.html' %}
{% load staticfiles %}

{% block css %}
    <link rel="stylesheet" href="{% static 'lib/leaflet/leaflet.css' %}" />
    <link rel="stylesheet" href="{% static 'map.css' %}" />
{% endblock %}

{% block js %}
    <script type="text/javascript" src="{% static 'lib/leaflet/leaflet.js' %}" ></script>
    <script type="text/javascript" src="{% static 'map.js' %}" ></script>
    <script type="text/javascript">
        var _default_view = {{defaultView|safe}};
        var _tiles_opt = {{tilesOpt|safe}};
        var _tiles_url = '{{tilesUrl}}';
    </script>
{% endblock %}

{% block content %}
<div ng-app="bbs" ng-controller="MapController">

    <div id="wrapper" ng-click="closeInfo()">
        <div class="container" >
            <div id="buttons-left">
                <i id="zoom-in" class="fa fa-2x fa-plus-square-o" ng-click="zoomIn()"></i>
                <i id="zoom-out" class="fa fa-2x fa-minus-square-o" ng-click="zoomOut()"></i>
            </div>
            <div id="buttons-right"></div>
        </div>
        <div id="map"></div>
    </div>

    <div id="footer" ng-class="{'up': info}">
        <div class="container">
            <div id="footer-left" class="visible-xs">
                <a class="visible-xs" ng-click="toogleInfo()">Worum geht es hier?</a>
            </div>

            <div id="footer-center" class="hidden-xs">
                <div class="infohelp" ng-class="{'show': help}">Worum geht es hier?</div>

                <div class="infotab glyphicon" ng-click="toogleInfo()"
                    ng-mouseenter="help = true"
                    ng-mouseleave="help = false">
                    <div class="glyphicon" ng-class="{
                        'glyphicon-chevron-up': !info,
                        'glyphicon-chevron-down': info
                    }"></div>
                </div>
            </div>

            <div id="footer-right">
                <div class="attribution">
                    <div>Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a></div>
                    <div>Map data Â© 2012 OpenStreetMap contributors</div>
                </div>
            </div>
        </div>
        <div class="infobox">
                <div class="infobox-close" ng-click="closeInfo()">
                    <a href="" class="pull-right">&times;</a>
                </div>
                <div class="container">
                    {{infotext|safe}}
                </div>
            </div>
    </div>
</div>
{% endblock %}

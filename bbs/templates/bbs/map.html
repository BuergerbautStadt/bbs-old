{% extends 'bbs/layout.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ STATIC_URL }}leaflet/leaflet.css" />
    <script type="text/javascript" src="{{ STATIC_URL }}leaflet/leaflet.js" >
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}map.js" >
    </script>
    <script type="text/javascript">
    var siteUrl = '{{ siteUrl|safe }}';
    var staticUrl = '{{ STATIC_URL }}';

    var verfahrensschritte = {};
    {% for v in verfahrensschritte %}
    verfahrensschritte[{{v.pk}}] = {"pk": {{v.pk}}, "name": "{{v.name}}", "icon": "{{v.icon}}", "hoverIcon": "{{v.hoverIcon}}"};
    {% endfor %}

    var points = {}
    {% for v in veroeffentlichungen %}
    points[{{v.pk}}] = {"pk": {{v.pk}}, "ende": "{{v.ende}}", "behoerde": "{{v.behoerde.name}}", "projekt": {{v.projekt.pk}}, "adresse": "{{v.projekt.adresse}}", "lat": {{v.projekt.lat|stringformat:"F"}}, "lon": {{v.projekt.lon|stringformat:"F"}}, "vspk": {{v.verfahrensschritt.pk}} };
    {% endfor %}
    </script>

{% endblock %}

{% block content %}
<div id="sidebar">        
    <div id="sidebar-inner">            
        <div id="sidebar-scroll">
            <div id="sidebar-container">                      
                <div id="liste">
                    {% for v in verfahren %}
                    <div class = "listentry">
                        <h4>{{ v.name }}</h4>
                    </div>
                    {% for vs in v.verfahrensschritte.all %}
                    <div class = "listentry">
                        <div class ="entry">
                            <div class="icon">
                                <img src="{{ STATIC_URL }}{{vs.icon}}">
                            </div>
                            <div class="text">
                                {{vs.name}}<br>
                                <a href="/info#{{vs.pk}}">Was hei√üt das?</a>
                            </div>
                            <div class="check">                    
                                <label class="checkbox">
                                    <input name="vs-{{vs.pk}}" type="checkbox" value="" checked />
                                </label>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<div id="map"></div>
{% endblock %}
